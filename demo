Dockerfile:
for jar
FROM eclipse-temurin:17-jdk-alpine
ARG JAR_FILE=target/*.jar
COPY ${JAR_FILE} /app.jar
ENTRYPOINT ["java","-jar","/app.jar"]

for war
FROM tomcat:9.0
COPY target/*.war /usr/local/tomcat/webapps/ROOT.war
EXPOSE 8081
CMD ["catalina.sh", "run"]

docker-compose.yml:
services:
  web:
    image: maven:3.9-eclipse-temurin-17
    ports:
      - "9090:9090"
    depends_on:
      - db
    environment:
      SPRING_DATASOURCE_URL: jdbc:mysql://db:3306/demo
      SPRING_DATASOURCE_USERNAME: root
      SPRING_DATASOURCE_PASSWORD: rootpw

  db:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: rootpw
      MYSQL_DATABASE: demo
    ports:
      - "3306:3306"
    volumes:
      - db-data:/var/lib/mysql

volumes:
  db-data:


https://github.com/budarajumadhurika/SampleMavenWebProject.git
<role rolename="manager-gui"/>
<role rolename="manager-script"/>
<user username="admin" password="admin123" roles="manager-gui,manager-script"/>

-->First we have to save key value pair .pam file in desktop in AWS folder
-->open cmd in this directory
-->now paste the ssh key which was copied from aws instance and click enter
then run following commands
-->sudo apt update
-->sudo apt-get install docker.io
-->sudo apt install git
-->sudo apt install nano
now in desktop create a folder Example in that create simple index.html  with any <h> and <p> tags
push the index.html to git 
After pushing clone the repo url

Run the following commands
-->git clone url
-->ls
you can see ur repo directory 
-->cd yourdir
-->ls
you will see index.html
-->nano Dockerfile
then paste the following to dockerfile
FROM nginx:alpine
COPY . /usr/share/nginx/html
-->press ctrl+o and enter then ctrl+x to exit
-->sudo  docker build -t myweb .
-->sudo  docker run -d -p 80:80 myweb
then click public ipv4 in the instance go and access in browser...


if maven project then the docker file would be
FROM tomcat:9-jdk11
COPY target/* .war /usr/local/tomcat/webapps/


1)Kubernetes
(docker on lo pettu)




kubectl version --client
minikube start


kubectl create deployment mynginx --image=nginx

if already created then 
kubectl set image deployment/myngnix nginx=nginx:latest

kubectl get deployments

Check the following commands:
kubectl get pods
kubectl describe pods


kubectl expose deployment mynginx --type=NodePort --port=80 --target-port=80


kubectl scale deployment mynginx --replicas=4
kubectl get service myngnix

kubectl port-forward svc/mynginx 8081:80
Access the app via http://localhost:8081.


If Error, use this option, Using Minikube Tunnel:
o	Start the tunnel:
minikube tunnel
o	Retrieve the service URL:
minikube service mynginx --url
o	Open the provided URL in your browser.


Minikube dashboard

kubectl delete deployment mynginx
kubectl delete service mynginx

minikube stop

minikube delete





2)Nagios(docker on lo pettu)


docker pull jasonrivers/nagios:latest
docker run --name nagiosdemo -p 8888:80 jasonrivers/nagios:latest

Open your browser and navigate to:
http://localhost:8888
o	Login Credentials:
	Username: nagiosadmin
	Password: nagios


docker stop nagiosdemo

docker rm nagiosdemo

docker images

docker rmi jasonrivers/nagios:latest


JENKINS:
First go to c->apache tomact->bin->startup.bat double click it 
if u want to change the port c->apachetomact->conf->server.xml and find connector port and change it !!!
BUILD:
git->repo->master or main
triggers:poll SCM - * * * * *
prebuild:
top level maven :
clean,install
postbuild:
Archive the artifacts:**/*
build other:test

TEST:
none
no trigger
environtemnt:delete workspace
prebuild:
Copy artifacts from another project:build      **/*
Invoke top-level Maven targets: test
post build:
Archive the artifacts:**/*
build other: deploy

DEPLOY:
none
no trigger
prebuild:
Copy artifacts from another project: test  **/*
post build:
Deploy war/ear to a container:   WAR/EAR files: **/*.war,  context path:any name
add container tomcat 9 add credentials (c->apache->conf->user.xml)

